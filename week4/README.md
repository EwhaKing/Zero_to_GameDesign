# 4️⃣ week4: 스킬 시스템 기획 도전

# 스킬 시스템

## 스킬의 기본 개념

- 설정된 특정 키를 통해서 사용되어지는 액션, 연출
- 시각적으로 보여지는 것이 중요
    - 애니메이션, 이펙트 등을 통해 어떤 것이 시작되었고 그로 인해 어떤 결과가 생겼는지에 대한 시각적인 표현
    - 기획의도가 정확히 표현되도록 간단히 애니메이션을 만들면 좋다.
        - ‘검을 휘두른다’ 라는 기획을 그저 글로만 전달하는 것이 아니라 간단하게 시각화하여 정확한 레퍼런스를 준다.
        - 시간이 너무 오래 걸리면 안 됨.
        - 이대로 똑같이 만들어라 라는 의도로 만드는 것이 아니라 참고 용도

### 공격 애니메이션

- 구간 별 종류
    - idle (기본 자세)
    - 준비 동작 (선딜)
    - 적을 공격하는 순간의 동작 (hit)
    - 다시 idle로 돌아가는 동작 (후딜)

### 충돌 처리(피격 체크) - 다양한 방식의 충돌로 인한 판정

- 스킬의 핵심 요소
- 애니메이션에 이벤트를 삽입하고 충돌로 체크
    - 애니메이션을 만들고 특정 프레임에 충돌을 체크하는 이벤트 설정
    - 무기에 hit bone을 설정
        - hit bone에서 충돌을 감지
        - 최적화를 위해서 hit bone 사용
    - 애니메이션 상의 hit 이벤트로 설정된 구간에 대상이 있으면 이벤트 성공
- 애니메이션을 참고하여 시간과 범위로 설정
    - 사거리를 사용하여 방향성이 상관없는 스킬을 구현할 수 있다.

### 타겟 여부에 따른 게임 종류

- **타겟 게임**
    - 스킬을 사용하기 위해 타겟이 먼저 설정되어야 함
    - 공격자의 방향이 중요하지 않다
    - 공격자가 공격하기 위해서는 타겟이 존재하여야 한다.
    - 스킬을 사용하면 무조건 타겟을 바라봄
    - 장점
        - 스킬 사용 편하다
        - 자원만 생각하면 되어 수집, 턴제 rpg에서 사용
- **논타겟 게임**
    - 타겟이 없어도 스킬 사용 가능
    - 방향에 따라서 적이 맞지 않을 수도 있다
    - 유저의 수동 컨트롤을 통해 대상을 따라가며 스킬을 사용하여야 한다
        - 보통 게임에서 타겟팅 기능 제공
    - 장단점
        - 타겟팅 기능이 있더라도 상황에 맞게 스킬을 사용해야 함
        - 최근 모바일 게임에서는 자동으로 에임을 보정을 해주는 기능이 많이 들어가 있다.

### 소환 npc 사용

- 특정 위치에 스킬을 사용하고 일정시간 후에 스킬이 발동되거나 스킬 효과가 잔류하는 상황 (움직임 X)
    - pc의 정보를 복사해 온 npc를 소환하여 npc가 일정 시간 스킬을 사용하다가 사라진다.
- 발사체 (움직임 O)
    - 앞으로 전진하는 npc 소환
    - 대상(or 충돌)이 있기 전까지 계속해서 전진 (관통 여부 확인 필요)
    - 지속적으로 범위 스킬을 사용하면서 전진하는 형태
        - tick time이 0.2초인 스킬을 지속적으로 쓰며 전진

### 버프 및 CC기

- 스택관련
    - 버프
        - 이로운 효과가 일정 시간 걸림
        - 간격을 두고 효과를 줌
    - 디버프
        - 버프와 반대.
        - 버프와 기능적으로 똑같지만 수치만 다름
- 기능 관련
    - CC (crowd control)
        - 대상의 컨트롤적인 부분을 빼앗는 것.
        - 기절, 수면, 마비 (유저 친화적)
        - 기능적 접근
            - 기본 공격 사용 금지
            - 스킬 사용 금지
            - 이동 금지
        - ex ) 수면 : 기본 공격 사용 금지, 스킬 사용 금지, 이동 금지, 유저 입력무시, 타겟 해제 / 스킬 사용 중단 조건: 대미지 받을 시 수면 해제

### 스킬에서 스킬 사용하기

- 체인 스킬
    - 유저 입장에서는 하나의 스킬이나 기획자에겐 두 개의 스킬로 여겨짐
        - 적을 올려쳐 공중에 띄우기 (A스킬), 점프하여 적을 내리 찍는다 (B스킬)
- 버프에서 스킬 사용하기
    - 시한폭탄 디버프 스킬을 사용한다
    - 디버프 시간이 종료될때  C스킬 사용
    - C스킬을 버프 스킬이 사용하는 것.
- 타격감
    - 검 휘두를 때의 바람 이펙트
    - 적이 맞았을 때의 이펙트 및 적의 피격 애니메이션

### 높이 값

- 온라인 게임에서는 보통 최적화를 위해서 2d로 처리함
    - 높이값 사용 x
    - 연출적으로 사용하기는 함
        - 크게 뛰어 공격하는 모션
        - 타겟은 항상 움직이기에 거리를 조절하기 위해서 애니메이션에는 높이감이 없도록 구현.
        - 이후에 적과의 거리에 따라 가변적으로 사용하게 구현
            - 가까운데 쓸데없이 높이 뛰지 않도록

### 대쉬

- 시간,속도,거리를 통해 가변적으로 사용
- 대상과의 거리는 가변적
    - 시간와 속도를 통해 연출을 자연스럽게

### 이동관련 CC

- 넉백
    - 상대방을 뒤로 밀어냄
- 풀링
    - 상대방을 당겨 옴
- 두 개가 동시에 한 대상에게 적용된다면?
    - 보통 순차적으로 처리함
    - 룰을 추가하여 이미 이동 CC기가 걸려있는 상황에는 다른 이동 CC기가 걸리지 않도록 한다.

### 경직과 수퍼 아머

- 타격감을 살리기 위한 개념
- 스킬에 경직 개념을 넣어 상대방이 움직이지 않고 피격 애니메이션이 나오도록 함
- 상대방이 pc라면
    - 공격을 못하고 계속 끊겨서는 안 됨.
    - 그 때 스킬을 쓸 수 있도록 일반 공격의 경직에 대응하는 수퍼아머를 만들어 스킬을 쓸 수 있도록 하고 스턴에 대응하는 수퍼 아머를 만들고..
    - 이런 식으로 물고 물리는 형태로 스킬과 수퍼아머 배치하여 pc가 스킬을 계속 맞고만 있지 않도록 함.
    
    |  | 경직공격 | 스턴공격 | 시스템 공격 |
    | --- | --- | --- | --- |
    | 일반공격 | 일반공격중단 | 일반공격중단 | 일반공격중단 |
    | 스킬공격 | 중단 x | 스킬공격중단 | 스킬공격중단 |
    | 무적공격 | 중단 x | 중단 x | 무적공격중단 |

### 타격감

- 애니메이션에서의 강약 조절
- 적절한 이펙트
- 효과음
- 카메라 연출
- 콘솔에서는 시간 천천히 (+패드의 진동)
